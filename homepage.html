<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HolDex | The Terminal Fire Explorer</title>
    
    <!-- ========================================== -->
    <!-- 1. ESSENTIAL LIBRARIES                     -->
    <!-- ========================================== -->
    
    <!-- 1. Buffer (Browser Compatible) -->
    <script src="https://bundle.run/buffer@6.0.3"></script>
    <script>
        if (typeof window.buffer !== 'undefined') {
            window.Buffer = window.buffer.Buffer;
        }
    </script>

    <!-- 2. Solana Web3.js -->
    <script src="https://unpkg.com/@solana/web3.js@1.91.0/lib/index.iife.min.js"></script>

    <!-- 3. Lightweight Charts (New Custom Charting Engine) -->
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>

    <!-- 4. Styling & Icons -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        fire: { bg: '#2a1005', panel: '#451a03', border: '#7c2d12', accent: '#ea580c', text: '#ffedd5', highlight: '#fb923c' },
                        void: '#0f0502'
                    },
                    fontFamily: { mono: ['JetBrains Mono', 'monospace'], sans: ['Comic Neue', 'cursive'] }
                }
            }
        }
    </script>
    <style>
        body { background-color: #2a1005; color: #ffedd5; font-family: 'Comic Neue', cursive; min-height: 100vh; font-size: 14px; overflow-x: hidden; padding-bottom: 60px; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #2a1005; }
        ::-webkit-scrollbar-thumb { background: #7c2d12; border-radius: 4px; border: 1px solid #451a03; }
        ::-webkit-scrollbar-thumb:hover { background: #ea580c; }
        nav { background: rgba(42, 16, 5, 0.95); backdrop-filter: blur(12px); border-bottom: 2px solid #7c2d12; }
        .brand-text { color: #ea580c; text-shadow: 2px 2px 0px #451a03; font-weight: 800; letter-spacing: 1px; }
        .holdex-table { width: 100%; border-collapse: separate; border-spacing: 0; }
        .holdex-table th { background: #451a03; position: sticky; top: 0; z-index: 20; padding: 14px 12px; text-align: right; font-size: 12px; font-weight: 700; color: #fb923c; border-bottom: 2px solid #7c2d12; cursor: pointer; white-space: nowrap; text-transform: uppercase; transition: color 0.2s, background 0.2s; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .holdex-table th:hover { background: #582206; color: #fff; }
        .holdex-table th:first-child { text-align: left; padding-left: 20px; }
        .holdex-table td { padding: 12px 12px; border-bottom: 1px solid rgba(124, 45, 18, 0.3); vertical-align: middle; font-family: 'JetBrains Mono', monospace; }
        .holdex-table td:first-child { padding-left: 20px; }
        .holdex-table tr:hover td { background: rgba(234, 88, 12, 0.1); }
        .img-token { width: 40px; height: 40px; border-radius: 8px; border: 2px solid #7c2d12; object-fit: cover; flex-shrink: 0; background: #000; }
        .pill { padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 700; font-family: 'JetBrains Mono'; }
        .pill-green { background: rgba(34, 197, 94, 0.15); color: #4ade80; border: 1px solid rgba(34, 197, 94, 0.4); }
        .pill-red { background: rgba(239, 68, 68, 0.15); color: #fca5a5; border: 1px solid rgba(239, 68, 68, 0.4); }
        .search-container { position: relative; width: 100%; }
        .search-box { background: #451a03; border: 2px solid #7c2d12; color: #fb923c; padding: 10px 36px 10px 16px; border-radius: 8px; outline: none; width: 100%; font-family: 'JetBrains Mono'; transition: border-color 0.2s; }
        .search-box:focus { border-color: #ea580c; }
        .search-box::placeholder { color: #9a3412; }
        .clear-search { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #9a3412; cursor: pointer; display: none; }
        .clear-search:hover { color: #ea580c; }
        .nav-btn { background: transparent; color: #9a3412; padding: 8px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 800; transition: all 0.2s; border: 2px solid transparent; }
        .nav-btn:hover { color: #fb923c; }
        .nav-btn.active { background: #451a03; color: #ea580c; border-color: #7c2d12; box-shadow: 0 4px 0 #2a1005; }
        .filter-toggle { background: #451a03; border: 2px solid #7c2d12; color: #9a3412; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: 700; transition: all 0.2s; display: flex; align-items: center; gap: 6px; }
        .filter-toggle.active { border-color: #22c55e; color: #4ade80; background: rgba(34, 197, 94, 0.1); }
        .refresh-btn { background: #451a03; border: 2px solid #7c2d12; color: #fb923c; width: 42px; height: 42px; display: flex; align-items: center; justify-content: center; border-radius: 8px; cursor: pointer; transition: all 0.2s; position: relative; }
        .refresh-btn:hover:not(:disabled) { border-color: #ea580c; color: #fff; background: #582206; }
        .refresh-btn:disabled { opacity: 0.5; cursor: not-allowed; border-color: #451a03; color: #7c2d12; }
        .page-btn { background: #2a1005; border: 2px solid #7c2d12; color: #fb923c; padding: 8px 16px; border-radius: 8px; font-weight: bold; font-family: 'JetBrains Mono', monospace; transition: all 0.2s; cursor: pointer; }
        .page-btn:hover:not(:disabled) { border-color: #ea580c; color: #fff; background: #451a03; }
        .page-btn:disabled { opacity: 0.5; cursor: not-allowed; border-color: #451a03; color: #7c2d12; }
        .view-section { display: none; }
        .view-section.active { display: block; animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Chart Container */
        .chart-container { width: 100%; height: 500px; background: #0f0502; border-radius: 16px; overflow: hidden; border: 2px solid #7c2d12; box-shadow: 0 10px 30px rgba(0,0,0,0.5); position: relative; }
        .chart-loader { position: absolute; inset: 0; background: rgba(15, 5, 2, 0.8); display: flex; align-items: center; justify-content: center; z-index: 10; font-family: 'JetBrains Mono'; color: #ea580c; font-weight: bold; }
        
        .stat-card { background: rgba(69, 26, 3, 0.8); border: 2px solid #7c2d12; border-radius: 12px; padding: 16px; display: flex; flex-direction: column; gap: 4px; box-shadow: 4px 4px 0 rgba(0,0,0,0.2); }
        .stat-label { font-size: 11px; color: #fb923c; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 700; }
        .stat-value { font-size: 18px; font-weight: 700; color: #fff; font-family: 'JetBrains Mono'; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .modal-overlay { position: fixed; inset: 0; background: rgba(15, 5, 2, 0.95); backdrop-filter: blur(5px); z-index: 100; display: flex; align-items: center; justify-content: center; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
        .modal-overlay.open { opacity: 1; pointer-events: auto; }
        .status-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: #451a03; border-top: 2px solid #ea580c; padding: 0 16px; height: 50px; display: flex; justify-content: space-between; align-items: center; z-index: 50; transition: background 0.2s; box-shadow: 0 -5px 20px rgba(234, 88, 12, 0.2); }
        .action-btn { background: #451a03; border: 2px solid #ea580c; color: #fb923c; padding: 12px 20px; border-radius: 12px; font-weight: 700; text-transform: uppercase; font-size: 13px; transition: all 0.2s; box-shadow: 4px 4px 0 #7c2d12; }
        .action-btn:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0 #7c2d12; background: #582206; color: #fff; }
        .back-btn { background: #2a1005; border: 2px solid #7c2d12; color: #9a3412; padding: 10px 16px; border-radius: 8px; font-weight: 700; transition: all 0.2s; }
        .back-btn:hover { border-color: #ea580c; color: #ea580c; }
        .sort-header { position: relative; cursor: pointer; user-select: none; }
        .sort-header:active { transform: translateY(1px); }
        .table-scroll-container { max-height: 70vh; overflow-y: auto; border-radius: 0 0 16px 16px; }
        .form-input { background: #451a03; border: 2px solid #7c2d12; color: #fb923c; padding: 12px; border-radius: 8px; width: 100%; font-family: 'JetBrains Mono'; margin-bottom: 16px; outline: none; transition: border-color 0.2s; }
        .form-input:focus { border-color: #ea580c; }
        .social-btn-lg { display: flex; align-items: center; justify-content: center; width: 56px; height: 56px; border-radius: 14px; border: 2px solid #7c2d12; background: #451a03; color: #ea580c; transition: all 0.2s; }
        .social-btn-lg:hover { border-color: #ea580c; color: #fff; background: #582206; transform: translateY(-2px); }
    </style>
</head>
<body>

<nav class="sticky top-0 z-40">
    <div class="max-w-[1800px] mx-auto px-4 md:px-6 py-4 flex flex-col md:flex-row md:justify-between md:items-center gap-4">
        <div class="flex items-center justify-between w-full md:w-auto">
            <div class="flex items-center gap-4 cursor-pointer group" onclick="navigateTo('')">
                <div class="w-12 h-12 rounded-xl flex items-center justify-center bg-[#451a03] text-orange-500 border-2 border-[#7c2d12] shadow-lg group-hover:border-orange-500 transition">
                    <i data-lucide="flame" width="24"></i>
                </div>
                <div>
                    <h1 class="text-3xl brand-text tracking-tight font-sans">HolDex</h1>
                </div>
            </div>
        </div>

        <div class="flex items-center bg-[#451a03]/50 p-1 rounded-lg border border-[#7c2d12]/50">
            <button class="nav-btn active" onclick="navigateTo('')">Home</button>
            <button class="nav-btn" onclick="navigateTo('about')">About</button>
            <button class="nav-btn" onclick="navigateTo('update')">Update</button>
        </div>
        
        <div id="table-controls" class="flex items-center gap-3 w-full md:w-auto transition-opacity duration-300">
            <button id="filter-verified" onclick="toggleVerifiedFilter()" class="filter-toggle" title="Show only Verified Community Updates">
                <i data-lucide="shield-check" width="16"></i> Verified
            </button>
            <button id="filter-zerovol" onclick="toggleZeroVolFilter()" class="filter-toggle active" title="Hide tokens with 0 Volume">
                <i data-lucide="bar-chart-2" width="16"></i> Hide 0 Vol
            </button>
            <div class="relative w-full md:w-auto search-container">
                <input type="text" id="search" placeholder="Search..." class="search-box" onkeyup="handleSearch(event)">
                <i id="clear-search-btn" data-lucide="x" width="16" class="clear-search" onclick="clearSearch()"></i>
            </div>
            <button id="manual-refresh" onclick="handleManualRefresh()" class="refresh-btn" title="Refresh Data">
                <i data-lucide="refresh-cw" width="18"></i>
            </button>
        </div>

        <div id="detail-controls" class="hidden w-full md:w-auto">
            <button onclick="navigateTo('')" class="back-btn flex items-center justify-center gap-2 w-full md:w-auto"><i data-lucide="arrow-left" width="16"></i> Back</button>
        </div>
    </div>
</nav>

<main class="max-w-[1800px] mx-auto px-0 md:px-6 py-4 md:py-8">
    
    <!-- DASHBOARD VIEW -->
    <div id="view-dashboard" class="view-section active">
        <div class="bg-[#2a1005] border-y md:border-2 border-[#7c2d12] md:rounded-2xl overflow-hidden shadow-2xl flex flex-col">
            <div class="table-scroll-container overflow-x-auto">
                <table class="holdex-table">
                    <thead>
                        <tr>
                            <th width="40%" class="sort-header" onclick="setSort('newest')">Asset <i data-lucide="arrow-down-up" width="10" class="inline opacity-50 ml-1"></i></th>
                            <th class="sort-header text-[#ea580c] border-b-[#ea580c] border-b-2" onclick="setSort('kscore')">K-Score</th>
                            <th class="hidden md:table-cell sort-header" onclick="setSort('5m')">5m</th>
                            <th class="hidden md:table-cell sort-header" onclick="setSort('1h')">1h</th>
                            <th class="sort-header" onclick="setSort('24h')">24h</th>
                            <th class="sort-header" onclick="setSort('mcap')">Mkt Cap</th>
                            <th class="sort-header" onclick="setSort('volume')">Vol (24h)</th> 
                            <th class="hidden md:table-cell sort-header" onclick="setSort('age')">Age</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <tr><td colspan="8" class="text-center py-20 text-orange-700 font-mono animate-pulse">Scanning Solana Mempool...</td></tr>
                    </tbody>
                </table>
            </div>
            
            <div class="bg-[#451a03] p-4 border-t-2 border-[#7c2d12] flex justify-between items-center">
                <div class="text-xs text-[#9a3412] font-mono font-bold uppercase tracking-wider hidden md:block">
                    Showing results
                </div>
                <div class="flex items-center gap-4 mx-auto md:mx-0">
                    <button id="btn-prev" onclick="changePage(-1)" class="page-btn flex items-center gap-2" disabled>
                        <i data-lucide="chevron-left" width="16"></i> Previous
                    </button>
                    <span id="page-display" class="text-[#fb923c] font-mono font-bold text-lg">Page 1</span>
                    <button id="btn-next" onclick="changePage(1)" class="page-btn flex items-center gap-2">
                        Next <i data-lucide="chevron-right" width="16"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- DETAIL VIEW (WITH CUSTOM CHARTS) -->
    <div id="view-detail" class="view-section px-4 md:px-0">
        <div id="detail-loading" class="text-center py-20 text-[#ea580c] font-mono animate-pulse hidden">Fetching Chain Data...</div>
        <div id="detail-content">
            <div id="detail-banner-container" class="hidden mb-6"></div>

            <div class="flex flex-col md:flex-row gap-6 mb-8 items-start">
                <div class="flex items-center gap-6 w-full md:w-auto bg-[#451a03] p-4 rounded-2xl border-2 border-[#7c2d12] shadow-xl">
                    <img id="detail-img" src="" class="w-20 h-20 rounded-xl border-2 border-[#ea580c] object-cover bg-black shadow-lg">
                    <div class="flex-1 min-w-0">
                        <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-3 mb-1">
                            <h2 id="detail-ticker" class="text-3xl md:text-4xl font-bold text-white tracking-tight truncate font-mono"></h2>
                            <span id="detail-name" class="text-[#fb923c] text-xs md:text-sm bg-[#2a1005] px-3 py-1 rounded-lg border border-[#7c2d12] truncate"></span>
                        </div>
                        <div class="flex items-center gap-2 cursor-pointer group" onclick="copyMint()">
                            <span id="detail-mint" class="text-xs text-[#9a3412] font-mono group-hover:text-[#ea580c] transition truncate max-w-[200px] md:max-w-none"></span>
                            <i data-lucide="copy" width="12" class="text-[#9a3412] group-hover:text-[#ea580c] flex-shrink-0"></i>
                        </div>
                        <div id="detail-desc" class="mt-3 text-sm text-[#ffedd5] font-sans leading-relaxed opacity-90 hidden"></div>
                    </div>
                </div>
                <div class="flex-1"></div>
                <div class="flex flex-wrap gap-3 w-full md:w-auto items-center justify-end" id="detail-actions"></div>
            </div>
            
            <div class="grid grid-cols-2 lg:grid-cols-6 gap-3 md:gap-4 mb-6">
                <div class="stat-card border-[#ea580c] relative overflow-hidden">
                    <span class="stat-label text-[#ea580c]">K-Score</span>
                    <span id="stat-kscore" class="stat-value text-[#fb923c] text-2xl font-bold font-mono">ðŸ”’</span>
                </div>
                <div class="stat-card"><span class="stat-label">Price</span><span id="stat-price" class="stat-value text-[#ffedd5]">-</span></div>
                <div class="stat-card"><span class="stat-label">MCap</span><span id="stat-mcap" class="stat-value text-[#ea580c]">-</span></div>
                <div class="stat-card col-span-2 md:col-span-1"><span class="stat-label">24h Vol</span><span id="stat-vol" class="stat-value text-[#22c55e]">-</span></div>
                <div class="stat-card"><span class="stat-label">1H</span><span id="stat-chg1h" class="stat-value">-</span></div>
                <div class="stat-card"><span class="stat-label">24H</span><span id="stat-chg24h" class="stat-value">-</span></div>
            </div>
            
            <!-- CUSTOM CHART CONTAINER -->
            <div class="chart-container" id="tv-chart">
                <div id="chart-loader" class="chart-loader">LOADING MARKET DATA...</div>
            </div>
        </div>
    </div>
</main>

<script>
    const API_URL = 'http://localhost:3000'; // Adjust if needed
    let pollingInterval;
    let chartInstance = null;
    let candleSeries = null;
    
    // --- State ---
    let currentSort = 'kscore';
    let searchQuery = '';
    let currentPage = 1;
    let isVerifiedFilter = false;
    let isZeroVolHidden = true;

    window.onload = () => { handleRoute(); };
    window.addEventListener('hashchange', handleRoute);

    function navigateTo(path) { window.location.hash = path; }
    
    function handleRoute() {
        const hash = window.location.hash;
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.getElementById('table-controls').classList.add('hidden');
        document.getElementById('detail-controls').classList.add('hidden');
        
        if (pollingInterval) { clearInterval(pollingInterval); pollingInterval = null; }

        if (hash === '' || hash === '#') {
            document.getElementById('view-dashboard').classList.add('active');
            document.getElementById('table-controls').classList.remove('hidden');
            fetchList();
            pollingInterval = setInterval(fetchList, 5000);
        } else if (hash.startsWith('#token/')) {
            showDetailView(hash.split('/')[1]);
        }
    }

    // --- CHARTING LOGIC (Lightweight Charts) ---
    async function initChart(mint) {
        const container = document.getElementById('tv-chart');
        const loader = document.getElementById('chart-loader');
        
        // Clear previous chart
        if (chartInstance) {
            chartInstance.remove();
            chartInstance = null;
        }
        
        loader.style.display = 'flex';
        
        try {
            // Fetch History
            const res = await fetch(`${API_URL}/api/history/${mint}`);
            const data = await res.json();
            
            // Transform data for Lightweight Charts (requires sorted timestamps)
            // Expecting backend: [{ time: UNIX_MS, open, high, low, close }]
            // Library needs seconds for time
            const chartData = data.map(d => ({
                time: d.time / 1000, 
                open: d.open,
                high: d.high,
                low: d.low,
                close: d.close
            })).sort((a, b) => a.time - b.time);

            loader.style.display = 'none';

            // Create Chart
            chartInstance = LightweightCharts.createChart(container, {
                width: container.clientWidth,
                height: container.clientHeight,
                layout: {
                    background: { type: 'solid', color: '#0f0502' },
                    textColor: '#9a3412',
                },
                grid: {
                    vertLines: { color: '#2a1005' },
                    horzLines: { color: '#2a1005' },
                },
                timeScale: {
                    timeVisible: true,
                    secondsVisible: false,
                    borderColor: '#7c2d12',
                },
                rightPriceScale: {
                    borderColor: '#7c2d12',
                },
            });

            candleSeries = chartInstance.addCandlestickSeries({
                upColor: '#22c55e',
                downColor: '#ef4444',
                borderVisible: false,
                wickUpColor: '#22c55e',
                wickDownColor: '#ef4444',
            });

            if (chartData.length > 0) {
                candleSeries.setData(chartData);
            }

            // Handle Resize
            window.addEventListener('resize', () => {
                if(chartInstance) chartInstance.resize(container.clientWidth, container.clientHeight);
            });

        } catch (e) {
            console.error("Chart Error:", e);
            loader.innerText = "DATA UNAVAILABLE";
        }
    }

    // --- DETAIL VIEW LOGIC ---
    async function showDetailView(mint) {
        document.getElementById('view-detail').classList.add('active');
        document.getElementById('detail-controls').classList.remove('hidden');

        // Fetch basic token data
        try {
            const res = await fetch(`${API_URL}/api/token/${mint}`);
            const data = await res.json();
            if (data.success) {
                const t = data.token;
                document.getElementById('detail-ticker').innerText = t.ticker;
                document.getElementById('detail-name').innerText = t.name;
                document.getElementById('detail-mint').innerText = t.mint;
                document.getElementById('detail-img').src = t.image || 'https://placehold.co/80';
                
                // Update stats
                document.getElementById('stat-price').innerText = `$${t.priceUsd || 0}`;
                document.getElementById('stat-mcap').innerText = `$${t.marketCap ? t.marketCap.toLocaleString() : 0}`;
            }
        } catch (e) {}

        // Initialize our Custom Indexer Chart
        initChart(mint);
    }

    // --- LIST FETCH LOGIC (Simplified for brevity) ---
    async function fetchList() {
        const tbody = document.getElementById('table-body');
        try {
            let url = `${API_URL}/api/tokens?sort=${currentSort}&limit=50&page=${currentPage}`;
            if(searchQuery) url += `&search=${searchQuery}`;
            if(isVerifiedFilter) url += `&filter=verified`;

            const res = await fetch(url);
            const data = await res.json();
            
            if (data.success) {
                let tokens = data.tokens;
                if(isZeroVolHidden) tokens = tokens.filter(t => t.volume24h > 0);
                
                if(tokens.length === 0) {
                    tbody.innerHTML = `<tr><td colspan="8" class="text-center py-20 text-[#9a3412]">No tokens found.</td></tr>`;
                    return;
                }

                tbody.innerHTML = tokens.map(t => `
                    <tr onclick="navigateTo('token/${t.mint}')" class="cursor-pointer group">
                        <td>
                            <div class="flex items-center gap-3">
                                <img src="${t.image || 'https://placehold.co/40'}" class="img-token">
                                <div>
                                    <div class="font-bold text-white">${t.ticker}</div>
                                    <div class="text-[10px] text-[#9a3412] font-mono">${t.name}</div>
                                </div>
                            </div>
                        </td>
                        <td class="text-right text-[#fb923c]">${t.kScore || 0}</td>
                        <td class="hidden md:table-cell text-right">${(t.change5m||0).toFixed(2)}%</td>
                        <td class="hidden md:table-cell text-right">${(t.change1h||0).toFixed(2)}%</td>
                        <td class="text-right">${(t.change24h||0).toFixed(2)}%</td>
                        <td class="text-right text-[#fb923c]">$${(t.marketCap||0).toLocaleString()}</td>
                        <td class="text-right text-[#22c55e]">$${(t.volume24h||0).toLocaleString()}</td>
                        <td class="hidden md:table-cell text-right text-[#9a3412]">now</td>
                    </tr>
                `).join('');
                lucide.createIcons();
            }
        } catch (e) {
            console.error(e);
        }
    }

    // Helper stubs
    window.setSort = (s) => { currentSort = s; fetchList(); };
    window.toggleVerifiedFilter = () => { isVerifiedFilter = !isVerifiedFilter; fetchList(); };
    window.toggleZeroVolFilter = () => { isZeroVolHidden = !isZeroVolHidden; fetchList(); };
    window.handleSearch = (e) => { searchQuery = e.target.value; fetchList(); };
    window.clearSearch = () => { searchQuery = ''; document.getElementById('search').value = ''; fetchList(); };
    window.changePage = (d) => { currentPage += d; if(currentPage<1) currentPage=1; fetchList(); };
    window.handleManualRefresh = fetchList;
</script>
</body>
</html>
